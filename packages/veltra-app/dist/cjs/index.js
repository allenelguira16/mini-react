"use strict";var s=require("./chunks/ssr-iYM55qQm.js");function h(r){if(s.destroyContext)s.destroyContext.push(r);else throw new Error("onDestroy called outside of component")}const g=new WeakMap;function v(r,t){if(!s.activeEffect)return;let e=g.get(r);e||(e=new Map,g.set(r,e));let n=e.get(t);n||(n=new Set,e.set(t,n)),n.has(s.activeEffect)||(n.add(s.activeEffect),s.activeEffect.deps?s.activeEffect.deps.push(n):s.activeEffect.deps=[n])}function w(r,t){const e=g.get(r);if(!e)return;const n=e.get(t);if(!n)return;const c=new Set(n);for(const o of c)o()}function d(r){if(s.stateContext){const{states:t,index:e}=s.stateContext;if(t.length<=e){const n=x(r);t.push(n)}return t[s.stateContext.index++]}return x(r)}function x(r){const t={value:r};return new Proxy(t,{get(e,n,c){return v(e,n),Reflect.get(e,n,c)},set(e,n,c,o){const u=e[n],f=Reflect.set(e,n,c,o);return u!==c&&w(e,n),f}})}function R(r){const t=d();return s.effect(()=>{t.value=r()}),{get value(){return t.value}}}function C(r){const t=d(!0);let e=null,n,c=null,o="pending";const u=d(0),f=async()=>{t.value=!0,e=null,n=void 0,o="pending",c=r(),c.then(i=>{n=i,e=null,t.value=!1,o="fulfilled"}).catch(i=>{n=void 0,e=i,o="rejected",t.value=!1}),s.untrack(()=>u.value++)};return s.effect(()=>{f()}),{get loading(){return t.value},get error(){return e},get data(){if(u.value,o==="pending")throw c;if(o==="rejected")throw e;return n},refetch:f,mutate(i){n=i,u.value++}}}const p=new WeakMap;function M(r){function t(e){if(p.has(e))return p.get(e);const n=new Proxy(e,{get(c,o,u){v(c,o);const f=Reflect.get(c,o,u);if(typeof f=="function")return f.bind(u);const i=Reflect.getOwnPropertyDescriptor(c,o);return i?.get?i.get.call(u):typeof f=="object"&&f!==null?t(f):f},set(c,o,u,f){const i=c[o],a=Reflect.set(c,o,u,f);return i!==u&&w(c,o),a}});return p.set(e,n),n}return t(r)}function k(r){const t=[...r.filter(e=>!(e instanceof Text&&s.componentRootNodes.has(e)))];return t.length===1?t[0]:t}function N(r){let t,e=!0;return()=>(e&&(t=r(),e=!1),t)}function S(r){function t(e){if(e===null||typeof e!="object"||typeof e=="function")return e;const n={};for(const c of Reflect.ownKeys(e)){const o=e[c];n[c]=t(o)}return n}return t(r)}function b(r,t){s.renderChildren(r,s.toArray(t()))}function y(r,t){for(const e of t.nodes)r.contains(e)&&(s.runComponentCleanup(e),r.removeChild(e))}function j(r,t,e){for(const n of t)r.insertBefore(n,e)}function D(r,t,e,n){const c=new Map;let o=r.nextSibling;for(let u=0;u<n.length;u++){const f=n[u];c.set(f,(c.get(f)||0)+1);let i=0;const a=e.find(l=>l.item===f&&++i===c.get(f));a&&(s.untrack(()=>a.index.value=u),j(t,a.nodes,o),o=a.nodes[a.nodes.length-1].nextSibling)}}function E(r){const t=new Map;for(const e of r)t.set(e,(t.get(e)||0)+1);return t}function P(r,t,e){const n=E(t),c=E(e.map(o=>o.item));return e.filter(o=>(c.get(o.item)??0)>(n.get(o.item)??0)?(y(r,o),c.set(o.item,(c.get(o.item)??0)-1),!1):!0)}function O(r,t,e,n){const c=[],o=new Map;for(const u of r)if(o.set(u,(o.get(u)||0)+1),t.filter(f=>f.item===u).length+c.filter(f=>f.item===u).length<(o.get(u)||0)){const f=d(-1),i=s.toArray(e(u,f));c.push({id:n++,item:u,nodes:i,index:f})}return c}function q(r){const t=s.getCurrentSuspenseHandler();return{each:e=>{const n=r;return e=e,s.s(()=>{const c=document.createTextNode("");let o=[],u=0;function f(a,l){o=P(a,l,o),o.push(...O(l,o,e,u)),D(c,a,o,l)}const i=()=>{const a=s.effect(()=>{try{const l=c.parentNode;if(!l)return;const m=n();if(!m)return;f(l,[...m])}catch(l){if(l instanceof Promise)queueMicrotask(()=>{a()}),t(l);else throw l}})};return console.log("rerender"),s.onMount(()=>{i()}),h(()=>{for(const a of o)y(c.parentNode,a)}),s.componentRootNodes.add(c),c},{})}}}exports.Fragment=s.Fragment,exports.Suspense=s.Suspense,exports.effect=s.effect,exports.onMount=s.onMount,exports.stopEffect=s.stopEffect,exports.untrack=s.untrack,exports.computed=R,exports.createRoot=b,exports.logJsx=k,exports.loop=q,exports.memo=N,exports.onDestroy=h,exports.resource=C,exports.state=d,exports.store=M,exports.unwrap=S;
//# sourceMappingURL=index.js.map
