"use strict";var u=require("./chunks/ssr-DaprFAgJ.js");function m(c){if(u.destroyContext)u.destroyContext.push(c);else throw new Error("onDestroy called outside of component")}const p=new WeakMap;function h(c,t){if(!u.activeEffect)return;let e=p.get(c);e||(e=new Map,p.set(c,e));let n=e.get(t);n||(n=new Set,e.set(t,n)),n.has(u.activeEffect)||(n.add(u.activeEffect),u.activeEffect.deps?u.activeEffect.deps.push(n):u.activeEffect.deps=[n])}function w(c,t){const e=p.get(c);if(!e)return;const n=e.get(t);if(!n)return;const r=new Set(n);for(const o of r)o()}function d(c){if(u.stateContext){const{states:t,index:e}=u.stateContext;if(t.length<=e){const n=y(c);t.push(n)}return t[u.stateContext.index++]}return y(c)}function y(c){const t={value:c};return new Proxy(t,{get(e,n,r){return h(e,n),Reflect.get(e,n,r)},set(e,n,r,o){const s=e[n],f=Reflect.set(e,n,r,o);return s!==r&&w(e,n),f}})}function C(c){const t=d();return u.effect(()=>{t.value=c()}),{get value(){return t.value}}}function S(c){let t=!0,e=null,n,r=null,o="pending";const s=d(0),f=async()=>{t=!0,e=null,n=void 0,o="pending",r=c(),r.then(a=>{n=a,e=null,o="fulfilled",t=!1,u.untrack(()=>s.value++)}).catch(a=>{n=void 0,e=a,o="rejected",t=!1,u.untrack(()=>s.value++)}),u.untrack(()=>s.value++)};return u.effect(()=>{f()}),{get loading(){return s.value,t},get error(){return e},get data(){if(s.value,o==="pending")throw r;if(o==="rejected")throw e;return n},refetch:f,mutate(a){n=a,s.value++}}}const g=new WeakMap;function k(c){function t(e){if(g.has(e))return g.get(e);const n=new Proxy(e,{get(r,o,s){h(r,o);const f=Reflect.get(r,o,s);if(typeof f=="function")return f.bind(s);const a=Reflect.getOwnPropertyDescriptor(r,o);return a?.get?a.get.call(s):typeof f=="object"&&f!==null?t(f):f},set(r,o,s,f){const a=r[o],i=Reflect.set(r,o,s,f);return a!==s&&w(r,o),i}});return g.set(e,n),n}return t(c)}function M(c){const t=[...c.filter(e=>!(e instanceof Text&&u.componentRootNodes.has(e)))];return t.length===1?t[0]:t}function v(c){let t,e=!0;return()=>(e&&(t=c(),e=!1),t)}function N(c){function t(e){if(e===null||typeof e!="object"||typeof e=="function")return e;const n={};for(const r of Reflect.ownKeys(e)){const o=e[r];n[r]=t(o)}return n}return t(c)}function R(c){let t;return{mount:e=>{const n=document.querySelector(e);if(!(n instanceof Element))throw new Error("Node must be of type Element");t=u.renderChildren(n,u.toArray(c()))},unmount:()=>{if(!t)throw new Error("Can only unmount if the app is mounted");t()}}}function b(c,t){let e,n,r=null;const o=t??"default",s=v(()=>{if(e)return e;throw n||(r||(r=c().then(f=>{if(!(o in f))throw new Error(`lazy(): Export "${String(o)}" not found in module`);e=f[o]}).catch(f=>{n=f})),r)});return()=>u.getCurrentSuspenseHandler()?s():s}function x(c,t){for(const e of t.nodes)c.contains(e)&&(u.runComponentCleanup(e),c.removeChild(e))}function j(c,t,e){for(const n of t)c.insertBefore(n,e)}function A(c,t,e,n){const r=new Map;let o=c.nextSibling;for(let s=0;s<n.length;s++){const f=n[s];r.set(f,(r.get(f)||0)+1);let a=0;const i=e.find(l=>l.item===f&&++a===r.get(f));i&&(u.untrack(()=>i.index.value=s),j(t,i.nodes,o),o=i.nodes[i.nodes.length-1].nextSibling)}}function E(c){const t=new Map;for(const e of c)t.set(e,(t.get(e)||0)+1);return t}function D(c,t,e){const n=E(t),r=E(e.map(o=>o.item));return e.filter(o=>(r.get(o.item)??0)>(n.get(o.item)??0)?(x(c,o),r.set(o.item,(r.get(o.item)??0)-1),!1):!0)}function P(c,t,e,n){const r=[],o=new Map;for(const s of c)if(o.set(s,(o.get(s)||0)+1),t.filter(f=>f.item===s).length+r.filter(f=>f.item===s).length<(o.get(s)||0)){const f=d(-1),a=u.toArray(e(s,f));r.push({id:n++,item:s,nodes:a,index:f})}return r}function z(c){const t=u.getCurrentSuspenseHandler();return{each:e=>{const n=c;return e=e,u.m(()=>{const r=document.createTextNode("");let o=[],s=0;function f(i,l){o=D(i,l,o),o.push(...P(l,o,e,s)),A(r,i,o,l)}const a=()=>{u.effect(()=>{try{const i=r.parentNode;if(!i)return;const l=n();if(!l)return;f(i,[...l])}catch(i){if(i instanceof Promise)t&&t(i);else throw i}})};return u.onMount(()=>{a()}),m(()=>{for(const i of o)x(r.parentNode,i)}),u.componentRootNodes.add(r),r},{})}}}exports.Fragment=u.Fragment,exports.Suspense=u.Suspense,exports.effect=u.effect,exports.onMount=u.onMount,exports.stopEffect=u.stopEffect,exports.untrack=u.untrack,exports.computed=C,exports.createApp=R,exports.lazy=b,exports.logJsx=M,exports.loop=z,exports.memo=v,exports.onDestroy=m,exports.resource=S,exports.state=d,exports.store=k,exports.unwrap=N;
//# sourceMappingURL=index.js.map
