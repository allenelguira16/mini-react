"use strict";var o=require("./chunks/register-lifecycle-BlN3nw8u.js");const v=new WeakMap;function A(n,t){if(!o.activeEffect)return;let e=v.get(n);e||(e=new Map,v.set(n,e));let c=e.get(t);c||(c=new Set,e.set(t,c)),c.has(o.activeEffect)||(c.add(o.activeEffect),o.activeEffect.deps?o.activeEffect.deps.push(c):o.activeEffect.deps=[c])}function M(n,t){const e=v.get(n);if(!e)return;const c=e.get(t);if(!c)return;const r=new Set(c);for(const u of r)u()}function y(n){const t={value:n};return new Proxy(t,{get(e,c,r){return A(e,c),Reflect.get(e,c,r)},set(e,c,r,u){const i=e[c],a=Reflect.set(e,c,r,u),d=Array.isArray(r),f=typeof r=="object"&&!Array.isArray(r)&&r!==null;return(d||f||typeof r!="object"&&typeof r!="function"&&i!==r)&&M(e,c),a}})}function N(n){const t=y();return o.effect(()=>{t.value=n()}),{get value(){return t.value}}}function S(n){const t=o.activeEffect;o.setActiveEffect(null);try{return n()}finally{o.setActiveEffect(t)}}function b(n,t){o.renderChildren(n,o.toArray(t()))}function k(n){function t(e){const{items:c,children:[r]}=e,u=document.createTextNode("");let i=[],a=0;function d(f,p){const R=E(p),g=E(i.map(s=>s.item));i=i.filter(s=>(g.get(s.item)??0)>(R.get(s.item)??0)?(x(f,s),g.set(s.item,(g.get(s.item)??0)-1),!1):!0);const m=[],h=new Map;for(const s of p)if(h.set(s,(h.get(s)||0)+1),i.filter(l=>l.item===s).length+m.filter(l=>l.item===s).length<(h.get(s)||0)){const l=y(-1),w=o.toArray(r(s,l));m.push({id:a++,item:s,nodes:w,index:l})}i.push(...m),T(u,f,i,p)}return o.onMount(()=>{o.effect(()=>{const f=u.parentNode;f&&d(f,[...c()])})}),o.onDestroy(()=>{for(const f of i)x(u.parentNode,f)}),o.componentRootNodes.add(u),u}return{each:e=>o.m(t,{items:()=>n,children:e})}}function x(n,t){for(const e of t.nodes)n.contains(e)&&(o.runComponentCleanup(e),n.removeChild(e))}function C(n,t,e){for(const c of t)n.insertBefore(c,e)}function T(n,t,e,c){const r=new Map;let u=n.nextSibling;for(let i=0;i<c.length;i++){const a=c[i];r.set(a,(r.get(a)||0)+1);let d=0;const f=e.find(p=>p.item===a&&++d===r.get(a));f&&(S(()=>f.index.value=i),C(t,f.nodes,u),u=f.nodes[f.nodes.length-1].nextSibling)}}function E(n){const t=new Map;for(const e of n)t.set(e,(t.get(e)||0)+1);return t}function j(n){let t,e=!0;return()=>(e&&(t=n(),e=!1),t)}function D(n){const t=[...n.filter(e=>!(e instanceof Text&&o.componentRootNodes.has(e)))];return t.length===1?t[0]:t}exports.Suspense=o.Suspense,exports.effect=o.effect,exports.h=o.h,exports.hSSR=o.hSSR,exports.onDestroy=o.onDestroy,exports.onMount=o.onMount,exports.cleanLog=D,exports.computed=N,exports.createRoot=b,exports.loop=k,exports.memo=j,exports.state=y,exports.untrack=S;
//# sourceMappingURL=index.js.map
