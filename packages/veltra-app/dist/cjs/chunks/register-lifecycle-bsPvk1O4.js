"use strict";let u=null;function k(e){u=e}function E(){u=null}function N(e){if(u)u.push(e);else throw new Error("onMount called outside of component")}let a=null;function $(e){a=e}function L(){a=null}function R(e){if(a)a.push(e);else throw new Error("onDestroy called outside of component")}const l=new Set;function O(){return[...l][l.size-1]||null}function h(e){return l.add(e),e(),l.delete(e),e}let y=null;function D(e){y=e}function T(){y=null}function G(e){if(e.subscriptions)for(const t of e.subscriptions)e.subscriptions.delete(t)}function F(e){return w(e)}function w(e){const t=()=>e();return y?.push(t),h(t)}let g=null;function I(e){g=e}function P(){g=null}function W(e){if(e.subscriptions)for(const t of e.subscriptions)e.subscriptions.delete(t)}function p(e){return x(e)}function x(e){const t=()=>e();return g?.push(t),h(t)}function _(e){k(e.mount),D(e.effect),I(e.reactor),$(e.destroy)}const C=new Map;function z(e,t){C.set(e,t)}function b(e){const t=C.get(e)||[];for(const n of t)n()}const j=new Set(["a","animate","animateMotion","animateTransform","circle","clipPath","defs","desc","discard","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","foreignObject","g","hatch","hatchpath","image","line","linearGradient","marker","mask","mesh","meshgradient","meshpatch","meshrow","metadata","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","solidcolor","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","unknown","use","view"]),B=new Set(["math","maction","maligngroup","malignmark","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mscarries","mscarry","msgroup","mstack","mstyle","msub","msubsup","msup","mtable","mtd","mtext","mtr","munder","munderover","semantics","annotation","annotation-xml"]),q=["animationIterationCount","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridRow","gridColumn","fontWeight","lineClamp","lineHeight","opacity","order","orphans","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth"],H=typeof document>"u",U=(e,{children:t=[],...n})=>H?v(e,n,d(t)):M(e,n,d(t));function J({children:e}){const t=document.createTextNode("");return e.unshift(t),e}function V(e,t,n,o){const i=Math.max(t.length,n.length);for(let r=0;r<i;r++){const s=t[r],c=n[r];if(o){if(f(c))continue;e.appendChild(c),t[r]=c;continue}if(f(s)&&!f(c)){e.appendChild(c),t[r]=c;continue}if(!f(s)&&f(c)){b(s),e.removeChild(t[r]),t.splice(r,1),r--;continue}if(!(f(s)&&f(c))){if(s&&c){s.isSameNode(c)||(b(s),s.replaceWith(c),t[r]=c);continue}console.log("[veltra]: warning - unknown dom detected: ",{old:s,new:c})}}return[...t]}function X(e,t){for(const n of t)if(typeof n=="function"){let o=[],i=!0;p(()=>{const r=d(n()).map(m).flat();o=V(e,o,r,i),i=!1})}else{const o=m(n);!Array.isArray(o)&&o&&e.appendChild(o)}}function K(e,t){for(const n in t)if(n.startsWith("on")&&typeof t[n]=="function"){const o=n.slice(2).toLowerCase();let i;p(()=>{i&&i();const r=t[n]();typeof r=="function"&&(e.addEventListener(o,r),i=()=>e.removeEventListener(o,r))})}else p(()=>{const o=typeof t[n]=="function"?t[n]():t[n];n==="ref"&&typeof o=="function"?o(e):n==="style"?Q(e,o):n==="disabled"?e.toggleAttribute(n,o):e.setAttribute(n,o)})}function Q(e,t){for(const[n,o]of Object.entries(t))typeof o=="number"&&!Y(n)?e.style[n]=`${o}px`:e.style[n]=o}function Y(e){return new Set(q).has(e)}function Z(e){for(const t in e)e[t]=e[t]instanceof Function?e[t]():e[t]}const S=new Set;function ee(e,t,n){Z(t);const o={mount:[],effect:[],reactor:[],destroy:[]};_(o);let i=e({...t,children:n}),r=Array.isArray(i)?i[0]:i;return re(o,r),S.add(r),i}function M(e,t,n){if(typeof e=="function")return ee(e,t,n);const o=te(e,t.xmlns);return K(o,t),X(o,n),o}function te(e,t){return(j.has(e)||B.has(e))&&t?document.createElementNS(t,e):document.createElement(e)}function v(e,t,n){return typeof e=="function"?e({...t,children:n}):`<${e} ${ne(t)}>${A(n)}</${e}>`}function ne(e){const t=[];for(const n in e){if(n.startsWith("on")&&typeof e[n]=="function")continue;const o=typeof e[n]=="function"?e[n]():e[n];n==="ref"&&typeof o=="function"||n==="style"||(n==="disabled"?o&&t.push("disabled"):t.push(`${n}="${o}"`))}return t.join(" ")}function A(e){let t=[];for(const n of e)typeof n=="function"?t.push(n()):Array.isArray(n)?n.forEach(o=>t.push(A([o]))):t.push(n);return t.join("")}const f=e=>e==null||e===!1;function m(e){if(typeof e=="string"||typeof e=="number")return document.createTextNode(String(e));if(e instanceof Node)return e;if(!f(e)){if(typeof e=="function")return m(e());if(Array.isArray(e))return e.map(m);console.log("Unknown JSX Element",e)}}const d=e=>(Array.isArray(e)?e:[e]).flat(1/0);function oe(e,t){const n=new MutationObserver(o=>{for(const i of o)for(const r of i.addedNodes)if(r===t){n.disconnect(),e();break}});queueMicrotask(()=>{if(!t.parentNode)throw new Error("[veltra]: Target node is not on dom tree");n.observe(t.parentNode,{childList:!0,subtree:!0})})}function re(e,t){const n=[];E(),T(),P(),L(),z(t,n),queueMicrotask(()=>{n.push(...e.destroy,...e.mount.map(o=>o()).filter(o=>!!o),...e.effect.map(o=>()=>G(o)),...e.reactor.map(o=>()=>W(o)))}),oe(()=>{e.effect.forEach(o=>w(o)),e.reactor.forEach(o=>x(o)),n.push(...e.mount.map(o=>o()).filter(o=>!!o))},t)}exports.componentRootNodes=S,exports.e=U,exports.effect=F,exports.getSubscriber=O,exports.h=M,exports.hSSR=v,exports.i=J,exports.onDestroy=R,exports.onMount=N,exports.reactor=p,exports.runComponentCleanup=b,exports.toArray=d,exports.watchSubscriber=h;
//# sourceMappingURL=register-lifecycle-bsPvk1O4.js.map
