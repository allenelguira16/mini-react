import{d as x,a as l,s as p,e as g,u as m,c as y,r as j,t as M,b as P,f as D,o as R,g as O}from"./chunks/ssr-DuHoRVar.js";import{F as U,S as V,h as X}from"./chunks/ssr-DuHoRVar.js";function C(r){if(x)x.push(r);else throw new Error("onDestroy called outside of component")}const h=new WeakMap;function N(r,t){if(!l)return;let e=h.get(r);e||(e=new Map,h.set(r,e));let n=e.get(t);n||(n=new Set,e.set(t,n)),n.has(l)||(n.add(l),l.deps?l.deps.push(n):l.deps=[n])}function S(r,t){const e=h.get(r);if(!e)return;const n=e.get(t);if(!n)return;const s=new Set(n);for(const o of s)o()}function d(r){if(p){const{states:t,index:e}=p;if(t.length<=e){const n=b(r);t.push(n)}return t[p.index++]}return b(r)}function b(r){const t={value:r};return new Proxy(t,{get(e,n,s){return N(e,n),Reflect.get(e,n,s)},set(e,n,s,o){const c=e[n],u=Reflect.set(e,n,s,o);return c!==s&&S(e,n),u}})}function F(r){const t=d();return g(()=>{t.value=r()}),{get value(){return t.value}}}function T(r){const t=d(!0);let e=null,n,s=null,o="pending";const c=d(0),u=async()=>{t.value=!0,e=null,n=void 0,o="pending",s=r(),s.then(f=>{n=f,e=null,t.value=!1,o="fulfilled"}).catch(f=>{n=void 0,e=f,o="rejected",t.value=!1}),m(()=>c.value++)};return g(()=>{u()}),{get loading(){return t.value},get error(){return e},get data(){if(c.value,o==="pending")throw s;if(o==="rejected")throw e;return n},refetch:u,mutate(f){n=f,c.value++}}}const w=new WeakMap;function W(r){function t(e){if(w.has(e))return w.get(e);const n=new Proxy(e,{get(s,o,c){N(s,o);const u=Reflect.get(s,o,c);if(typeof u=="function")return u.bind(c);const f=Reflect.getOwnPropertyDescriptor(s,o);return f?.get?f.get.call(c):typeof u=="object"&&u!==null?t(u):u},set(s,o,c,u){const f=s[o],i=Reflect.set(s,o,c,u);return f!==c&&S(s,o),i}});return w.set(e,n),n}return t(r)}function q(r){const t=[...r.filter(e=>!(e instanceof Text&&y.has(e)))];return t.length===1?t[0]:t}function A(r){let t,e=!0;return()=>(e&&(t=r(),e=!1),t)}function B(r){function t(e){if(e===null||typeof e!="object"||typeof e=="function")return e;const n={};for(const s of Reflect.ownKeys(e)){const o=e[s];n[s]=t(o)}return n}return t(r)}function H(r,t){j(r,M(t()))}function E(r,t){for(const e of t.nodes)r.contains(e)&&(P(e),r.removeChild(e))}function J(r,t,e){for(const n of t)r.insertBefore(n,e)}function K(r,t,e,n){const s=new Map;let o=r.nextSibling;for(let c=0;c<n.length;c++){const u=n[c];s.set(u,(s.get(u)||0)+1);let f=0;const i=e.find(a=>a.item===u&&++f===s.get(u));i&&(m(()=>i.index.value=c),J(t,i.nodes,o),o=i.nodes[i.nodes.length-1].nextSibling)}}function k(r){const t=new Map;for(const e of r)t.set(e,(t.get(e)||0)+1);return t}function $(r,t,e){const n=k(t),s=k(e.map(o=>o.item));return e.filter(o=>(s.get(o.item)??0)>(n.get(o.item)??0)?(E(r,o),s.set(o.item,(s.get(o.item)??0)-1),!1):!0)}function z(r,t,e,n){const s=[],o=new Map;for(const c of r)if(o.set(c,(o.get(c)||0)+1),t.filter(u=>u.item===c).length+s.filter(u=>u.item===c).length<(o.get(c)||0)){const u=d(-1),f=M(e(c,u));s.push({id:n++,item:c,nodes:f,index:u})}return s}function G(r){const t=O();return{each:e=>{const n=r;return e=e,D(()=>{const s=document.createTextNode("");let o=[],c=0;function u(i,a){o=$(i,a,o),o.push(...z(a,o,e,c)),K(s,i,o,a)}const f=()=>{const i=g(()=>{try{const a=s.parentNode;if(!a)return;const v=n();if(!v)return;u(a,[...v])}catch(a){if(a instanceof Promise)queueMicrotask(()=>{i()}),t(a);else throw a}})};return console.log("rerender"),R(()=>{f()}),C(()=>{for(const i of o)E(s.parentNode,i)}),y.add(s),s},{})}}}export{U as Fragment,V as Suspense,F as computed,H as createRoot,g as effect,q as logJsx,G as loop,A as memo,C as onDestroy,R as onMount,T as resource,d as state,X as stopEffect,W as store,m as untrack,B as unwrap};
//# sourceMappingURL=index.js.map
